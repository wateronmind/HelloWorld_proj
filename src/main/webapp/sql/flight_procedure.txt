create or replace PROCEDURE INSERT_FLIGHT(
    fi_nm in varchar2,
    fi_logo in varchar2,
    fsi_start_place in char,
    fsi_arrive_place in char,
    fsi_pass1_place in char,
    fsi_pass2_place in char,
    fsi_start_dt in char,
    fsi_arrive_dt in char,
    fsi_pass1_dt in char,
    fsi_pass2_dt in char,
    fsi_fir_seat in number,
    fsi_bus_seat in number,
    fsi_eco_seat in number,
    fsi_fir_pc in number,
    fsi_bus_pc in number,
    fsi_eco_pc in number,
    fsi_fir_mil in number,
    fsi_bus_mil in number,
    fsi_eco_mil in number
) AS
    
BEGIN

    -- 항공사 등록
    INSERT INTO flight_info (fi_id, fi_nm, fi_logo) 
        VALUES 
    ( (SELECT NVL(MAX(fi_id), 0) + 1 from flight_info ), fi_nm, fi_logo);

    -- 항공 스케쥴 등록
    INSERT INTO flight_spot_info 
        ( fsi_idx, 
          fi_id, 
          fsi_start_place, fsi_arrive_place, fsi_pass1_place, 
          fsi_pass2_place, fsi_start_dt, fsi_arrive_dt, fsi_pass1_dt, 
          fsi_pass2_dt, FSI_REG_DT, FSI_STATE, 
          fsi_fir_seat, fsi_bus_seat, fsi_eco_seat, 
          fsi_fir_pc, fsi_bus_pc, fsi_eco_pc, 
          fsi_fir_mil, fsi_bus_mil, fsi_eco_mil) 
    VALUES 
        ( (SELECT NVL(MAX(fsi_idx), 0) + 1 FROM flight_spot_info), 
          (SELECT MAX(fi_id) FROM flight_info), 
          fsi_start_place, fsi_arrive_place, fsi_pass1_place, fsi_pass2_place, 
          fsi_start_dt, fsi_arrive_dt, fsi_pass1_dt, fsi_pass2_dt, 
          sysdate, 0, 
          fsi_fir_seat, fsi_bus_seat, fsi_eco_seat, 
          fsi_fir_pc, fsi_bus_pc, fsi_eco_pc, 
          fsi_fir_mil, fsi_bus_mil, fsi_eco_mil );

    COMMIT;

    exception when others then
    dbms_output.put_line(
    ', insert_flight register is failed');
    ROLLBACK;

END INSERT_FLIGHT;